# 1.接入 logback 只需要两步：
1. 把 logback 的 jar 放在 classpath；
2. 在 classpath 根目录放一份叫 **logback-spring.xml**（或 logback.xml）的配置文件。

Spring Boot 启动时会自动完成其余工作——**不需要写一行 Java 代码**。

---

在你的 cloud 服务里，这两个条件已经满足：

1. 依赖已具备  
   Spring Boot 的 `spring-boot-starter-web`（间接被 `spring-cloud-starter-netflix-eureka-server` 引入）已经把 **logback-classic** 拉到 classpath，因此无需再显式加依赖。

2. 配置文件已存在  
   你给的那份 **logback-spring.xml** 就放在 `src/main/resources/`（Maven/Gradle 标准目录），文件名正好是 Spring Boot 认的 `logback-spring.xml`，所以启动时被自动扫描并装载。

---

配置内容一览（都在 logback-spring.xml 里）：

- **控制台输出**  
  格式：`14:23:45 [main] INFO c.b.b.l.EurekaStateListener - 服务xxx下线`

- **按天 + 按大小滚动文件**  
  路径：`/Users/c2e/logs/cloud/yyyy-MM-dd/yyyy-MM-dd.0.log`  
  单文件 200 MB，保留 100 天。

- **日志级别**  
  `<root level="info">` 表示 INFO 及以上级别才会输出。

---

总结：  
**“接入 logback”没有额外代码**，只要把 `logback-spring.xml` 扔进 `resources`，Spring Boot 自会解析并完成日志系统初始化；你的 `CloudApplication` 和 `EurekaStateListener` 里直接拿 SLF4J 的 `LoggerFactory.getLogger(...)` 用即可。 


# 2.怎么样配置logback，可以保证代码在任何电脑都可以跑起来，不需要依赖任何的绝对路径
把日志文件全部改成 **“相对路径 + Spring 占位符”** 即可，不管在哪台电脑、什么系统，只要启动应用就能在 **当前工程目录下** 自动生成 logs 文件夹，零额外配置。

可照搬的 `logback-spring.xml`（直接放 `src/main/resources`）：

```xml
<?xml version="1.0" encoding="UTF-8"?>
<configuration scan="true" scanPeriod="60 seconds">
    <!-- 控制台 -->
    <appender name="console" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- 滚动文件：相对路径，自动创建 logs 目录 -->
    <appender name="file" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- 这里用相对路径，启动时会在工程根目录下生成 logs 文件夹 -->
        <file>logs/cloud.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
            <!-- 每天一个文件夹，按 200 MB 切分 -->
            <fileNamePattern>logs/%d{yyyy-MM-dd}/cloud.%i.log</fileNamePattern>
            <maxFileSize>200MB</maxFileSize>
            <maxHistory>30</maxHistory>
            <totalSizeCap>10GB</totalSizeCap>
        </rollingPolicy>
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>
        </encoder>
    </appender>

    <!-- 异步写文件，性能更好 -->
    <appender name="asyncFile" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="file"/>
    </appender>

    <root level="INFO">
        <appender-ref ref="console"/>
        <appender-ref ref="asyncFile"/>
    </root>
</configuration>
```

关键点
1. `<file>logs/cloud.log</file>` 和 `<fileNamePattern>logs/...</fileNamePattern>` 都是**相对路径**，启动时会在 **工程根目录** 自动创建 `logs` 文件夹，Windows / macOS / Linux 通用。
2. 无需任何绝对路径、无需环境变量、无需手动建目录。
3. 如果想把日志放到 **用户家目录**，也可改成  
   `<file>${user.home}/logs/cloud.log</file>`  
   同样跨平台生效。

把上面文件直接覆盖原 `logback-spring.xml`，**零代码改动**，在哪台电脑都能跑。